{% extends "layout.html" %} {% block page_title %}Point {{ config.tcop.points[pointnum-1].number }}. {{ config.tcop.points[pointnum-1].title }} {% endblock %} {% block content %}
{% set thispoint = config.tcop.points[pointnum-1] %}

<main id="content" role="main">
  <div class="grid-row">
    <div class="column-two-thirds">

      <a class="link-back" href="/start-page">Back to start</a>

      <h1 class="heading-xlarge">
        Point {{ thispoint.number }}. {{ thispoint.title }}
      </h1>
      <p class="lede">
        {{ thispoint.summary }}
      </p>
      <p class="body-text">
        <a href="{{ thispoint.readmore }}" target="_blank">Read more about {{ thispoint.topic }} in the Technology Code of Practice</a>
      </p>

      <h2 class="heading-medium">
        {{ thispoint.keyquestion }}
      </h2>

      {% if thispoint.prompts %}
      <details>
        <summary><span class="summary">Questions to consider</span></summary>
        <div class="panel panel-border-narrow">
          {% for prompt in thispoint.prompts %}
          <p>{{ prompt | safe }}</p>
          {% endfor %}
        </div>
      </details>
      {% endif %}

      {% if thispoint.antipatterns %}
      <details>
        <summary><span class="summary">Things to avoid</span></summary>
        <div class="panel panel-border-narrow">
          {% for pattern in thispoint.antipatterns %}
          <p>{{ pattern | safe }}</p>
          {% endfor %}
        </div>
      </details>
      {% endif %}

      <!-- Copied from https://govuk-elements.herokuapp.com/form-elements/#form-toggle-content-checkboxes -->

      <form action="{{ '/point/' + (pointnum+1) if pointnum < config.tcop.points.length else '/tcop-answers'}}" method="post" class="form">
        <div class="form-group">
          <fieldset>

            <legend>
              <span class="body-text">Select all the statements that apply.</span>
            </legend>

            <h3 class="heading-small">
              Expected actions
            </h3>
            {% for behaviour in config.tcop.points[pointnum-1].teambehaviours.expected %}
            <div class="multiple-choice">
              <input id="point{{pointnum}}-teambehaviours-{{behaviour.id}}" name="point{{ thispoint.number }}-teambehaviours" type="checkbox" value="{{behaviour.description}}" {{ checked("point"+thispoint.number+"-teambehaviours", behaviour.description) }}>
              <label for="point{{pointnum}}-teambehaviours-{{behaviour.id}}">{{behaviour.description}}</label>
            </div>
            {% endfor %}

            <h3 class="heading-small">
              Strong actions
            </h3>
            {% for behaviour in thispoint.teambehaviours.strong %}
            <div class="multiple-choice">
              <input id="point{{pointnum}}-teambehaviours-{{behaviour.id}}" name="point{{ thispoint.number }}-teambehaviours" type="checkbox" value="{{behaviour.description}}" {{ checked("point"+thispoint.number+"-teambehaviours", behaviour.description) }}>
              <label for="point{{pointnum}}-teambehaviours-{{behaviour.id}}">{{behaviour.description}}</label>
            </div>
            {% endfor %}

            <h3 class="heading-small">
              Exceptional actions
            </h3>
            {% for behaviour in thispoint.teambehaviours.exceptional %}
            <div class="multiple-choice">
              <input id="point{{pointnum}}-teambehaviours-{{behaviour.id}}" name="point{{ thispoint.number }}-teambehaviours" type="checkbox" value="{{behaviour.description}}" {{ checked("point"+thispoint.number+"-teambehaviours", behaviour.description) }}>
              <label for="point{{pointnum}}-teambehaviours-{{behaviour.id}}">{{behaviour.description}}</label>
            </div>
            {% endfor %}

          </fieldset>
        </div>

        <div class="form-group">
          <fieldset>

            <legend>
              <h1 class="heading-medium">Overall summary of Point {{pointnum}} </h1>
            </legend>

            <div class="multiple-choice">
              <input id="point-summary-fine" type="radio" name="point{{ pointnum }}-point-summary" value="All fine" {{ checked("point"+pointnum+"-point-summary", "All fine") }}>
              <label for="point-summary-fine">All fine</label>
            </div>
            <div class="multiple-choice">
              <input id="point-summary-issues" type="radio" name="point{{ pointnum }}-point-summary" value="Some issues" {{ checked("point"+pointnum+"-point-summary", "Some issues") }}>
              <label for="point-summary-issues">Some issues</label>
            </div>
            <p class="form-block">or</p>
            <div class="multiple-choice">
              <input id="point-summary-tricky" type="radio" name="point{{ pointnum }}-point-summary" value="Tricky issues" {{ checked("point"+pointnum+"-point-summary", "Tricky issues") }}>
              <label for="point-summary-tricky">Tricky issues</label>
            </div>

          </fieldset>

            <h3 class="heading-small">
              Comments
            </h3>

              <label class="form-label" for="point{{pointnum}}-other-behaviour-description">Add any other information about the project or programmeâ€™s work on {{ thispoint.topic }} that you feel is useful to include.</label>
              <textarea class="form-control form-control-3-4" id="point{{pointnum}}-other-behaviour-description" name="point{{pointnum}}-other-behaviour-description" rows="5">{{data['point' + pointnum + '-other-behaviour-description']}}</textarea>

        </div>

        <div class="form-group">
          <input class="button" type="submit" value="Go to {{ 'the next question' if pointnum < config.tcop.points.length else 'the summary' }}">
          <p>
            <a href="/tcop-answers" title="Evaluation summary">Go straight to the summary</a>
          </p>
        </div>

      </form>

<!--
      <pre>
      <div class="code">
        Length: {{config.tcop.points.length}}
        Variable pointnum: {{ pointnum }}
        Title: {{ config.tcop.points[pointnum-1].title }}
        First behaviour: {{config.tcop.points[0].teambehaviours[0].id }}
      </div>
      </pre>
-->


    </div>
      <div class="column-third">

      <aside class="govuk-related-items" role="complementary">
        <h2 class="heading-medium" id="subsection-title">Jump to section</h2>
        <nav role="navigation" aria-labelledby="subsection-title">
          <ul class="font-xsmall">
            {% for point in config.tcop.points %}
            <li><a href="/point/{{ point.number }}">{{ point.number + '. ' + point.title }}</a></li>
            {% endfor %}
          </ul>
        </nav>
      </aside>

    </div>
  </div>
</main>

{% endblock %}
